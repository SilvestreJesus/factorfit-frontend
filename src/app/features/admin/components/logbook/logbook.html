<div class="container mx-auto px-2 sm:px-4 py-4 sm:py-6">
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
    <div>
      <h1 class="font-atomic text-pink-600 text-4xl sm:text-7xl">Bitácora</h1>
      <p class="text-gray-700 mt-1 text-sm sm:text-xl font-medium">
        {{ fechaHoraActual() | date:'HH:mm:ss' }} | {{ fechaHoraActual() | date:'fullDate':'':'es' }}
      </p>
    </div>

    <div class="flex flex-col gap-3 w-full md:w-96">
      <div class="relative w-full">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" 
             class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/70">
          <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"/>
        </svg>
        <input type="text" [ngModel]="busqueda()" (ngModelChange)="busqueda.set($event)" 
               placeholder="Buscar nombre, clave, cel..." 
               class="w-full bg-gradient-to-r from-pink-500 to-purple-600 border-none font-bold py-3 pl-10 pr-4 rounded-xl text-white placeholder:text-white/60 shadow-lg outline-none focus:ring-2 ring-pink-300 transition-all text-sm sm:text-base" />
      </div>
      <button (click)="descargarReportes()" 
            class="flex-1 bg-emerald-600 text-white px-3 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg hover:scale-105 transition-all flex items-center justify-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
      Excel
    </button>
      <button (click)="descargarBaseDeDatos()" 
            class="flex-1 bg-slate-800 text-white px-3 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg hover:scale-105 transition-all flex items-center justify-center gap-2 border border-slate-600">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Respaldo DB
    </button>
    </div>
  </div>

<div class="grid grid-cols-2 sm:flex sm:flex-wrap gap-2 mb-8 items-center">
  <button (click)="seleccionarVista('ganancias')" 
          [class.active-sub-nav]="currentSubView() === 'ganancias'" 
          class="sub-nav-btn relative">
    Ingresos
    <span *ngIf="getContador('ganancias') > 0" 
          class="absolute -top-2 -right-2 bg-pink-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse">
      {{ getContador('ganancias') }}
    </span>
  </button>

  <button (click)="seleccionarVista('deudores')" 
          [class.active-sub-nav]="currentSubView() === 'deudores'" 
          class="sub-nav-btn">
    Deudores
  </button>

  <button (click)="seleccionarVista('asistencia')" 
          [class.active-sub-nav]="currentSubView() === 'asistencia'" 
          class="sub-nav-btn relative">
    Asistencia
    <span *ngIf="getContador('asistencia') > 0" 
          class="absolute -top-2 -right-2 bg-purple-600 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse">
      {{ getContador('asistencia') }}
    </span>
  </button>

  <button (click)="seleccionarVista('renovacion')" 
          [class.active-sub-nav]="currentSubView() === 'renovacion'" 
          class="sub-nav-btn relative">
    Renovación
    <span *ngIf="getContador('renovacion') > 0" 
          class="absolute -top-2 -right-2 bg-emerald-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse">
      {{ getContador('renovacion') }}
    </span>
  </button>
</div>

  <div [ngSwitch]="currentSubView()">
    <app-logbook-income *ngSwitchCase="'ganancias'" [busqueda]="busqueda()" [sede]="sede"></app-logbook-income>
    <app-logbook-debtors *ngSwitchCase="'deudores'" [busqueda]="busqueda()" [sede]="sede"></app-logbook-debtors>
    <app-logbook-attendance *ngSwitchCase="'asistencia'" [busqueda]="busqueda()" [sede]="sede"></app-logbook-attendance>
    <app-logbook-recovery *ngSwitchCase="'renovacion'" [busqueda]="busqueda()" [sede]="sede"></app-logbook-recovery>

  </div>
</div>

<div *ngIf="toast().visible" 
     class="fixed bottom-6 right-6 z-[400] px-8 py-5 rounded-[1.5rem] shadow-2xl text-white animate-in slide-in-from-right" 
     [ngClass]="toast().tipo === 'success' ? 'bg-emerald-600' : 'bg-rose-600'">
  <span class="font-black uppercase text-sm tracking-wider">{{ toast().mensaje }}</span>
</div>