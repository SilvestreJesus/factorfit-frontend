<div class="flex flex-col lg:flex-row gap-6 animate-in zoom-in">
  <div class="flex-[3] bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl border border-white/20 overflow-hidden">
    <div class="p-2 bg-black/10 border-b border-white/10 flex overflow-x-auto gap-2">
      <button *ngFor="let dia of diasSemana" 
              (click)="diaSeleccionado.set(dia)"
              [disabled]="esDiaFuturo(dia)"
              [class.bg-pink-600]="diaSeleccionado() === dia"
              [class.opacity-30]="esDiaFuturo(dia)"
              class="px-5 py-2.5 rounded-xl font-black text-[11px] uppercase transition-all border border-pink-500/30 text-white">
        {{ dia }}
      </button>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full text-left">
        <thead class="bg-black/20 text-pink-600 text-[10px] uppercase font-black">
          <tr>
            <th class="p-4">Usuario</th>
            <th class="p-4">Status</th>
            <th class="p-4">Tipo / Meses</th>
            <th class="p-4 text-right">Contacto</th>
          </tr>
        </thead>
        <tbody class="text-gray-800">
          <tr *ngFor="let u of asistenciaFiltrados()" class="border-b border-white/10 hover:bg-white/5 transition-colors">
            <td class="p-4">
              <p class="font-bold lowercase leading-tight">{{u.nombres}} {{u.apellidos}}</p>
              <span class="text-pink-600 font-mono font-bold text-xs uppercase">{{u.clave_usuario}}</span>
            </td>
            <td class="p-4">
              <span [ngClass]="{'text-green-500': u.status === 'activo', 'text-yellow-500': u.status !== 'activo'}" class="italic font-black text-sm uppercase">
                {{ obtenerStatusLabel(u) }}
              </span>
            </td>
            <td class="p-4">
              <span class="text-purple-500 font-black text-sm">
                {{ calcularMeses(u.fecha_corte) }}
              </span>
            </td>
            <td class="p-4 text-right font-bold text-gray-400">
              {{ u.telefono }}
            </td>
          </tr>
        </tbody>
      </table>
      <div *ngIf="asistenciaFiltrados().length === 0" class="p-12 text-center text-white/40 italic">
        {{ esDiaFuturo(diaSeleccionado()) ? 'üîí D√≠a bloqueado' : 'No hay registros para este d√≠a' }}
      </div>
    </div>
  </div>

<div class="flex-1 bg-white/10 backdrop-blur-md rounded-3xl shadow-2xl border border-white/20 p-8 flex flex-col min-h-[400px]">
    <h5 class="text-pink-600 font-black uppercase text-xs mb-10 text-center tracking-widest">Asistencia Semanal</h5>
    
    <div class="flex items-end justify-around h-56 gap-4 px-2 border-b border-white/10 pb-2">
    <div *ngFor="let stat of statsGrafica()" class="flex flex-col items-center flex-1 group relative h-full justify-end">
        
        <span class="absolute -top-10 text-[11px] font-black text-white opacity-0 group-hover:opacity-100 transition-all bg-pink-600 px-2 py-1 rounded-lg shadow-lg z-10">
        {{stat.valor}} socios
        </span>

        <div [style.height.%]="(stat.valor / obtenerMaximo(statsGrafica())) * 100" 
            class="w-full bg-gradient-to-t from-pink-600 to-pink-400 rounded-t-lg shadow-[0_0_15px_rgba(219,39,119,0.3)] transition-all duration-1000 ease-out min-h-[4px] hover:brightness-125 hover:scale-x-105 origin-bottom">
        </div>

        <span class="text-[10px] mt-4 uppercase font-black text-gray-400 tracking-tighter">{{stat.dia}}</span>
    </div>
    </div>

    <div class="mt-8">
        <p class="text-[9px] text-gray-400 text-center leading-relaxed">
            <span class="text-pink-500 font-bold">‚óè</span> Los datos se reinician autom√°ticamente cada lunes.
        </p>
    </div>
  </div>
</div>